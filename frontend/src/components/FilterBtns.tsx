import { useDispatch, useSelector } from "react-redux";
import classes from "./FilterBtns.module.css";
import { setFilter, setSelectedDate } from "../redux/todoState/todoSlice";
import { TRootState } from "../redux/store";
import DateInput from "./UI/DateInput";

export default function FilterBtns() {
  const dispatch = useDispatch();
  const { filter, selectedDate } = useSelector(
    (state: TRootState) => state.todos,
  );

  return (
    <div className={classes.btns}>
      <button
        id={classes.done}
        onClick={() => dispatch(setFilter("completed"))}
      >
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M3.75 16.875C3.58424 16.875 3.42527 16.8092 3.30806 16.6919C3.19085 16.5747 3.125 16.4158 3.125 16.25V3.75C3.125 3.58424 3.19085 3.42527 3.30806 3.30806C3.42527 3.19085 3.58424 3.125 3.75 3.125H15.3125C15.5611 3.125 15.7996 3.02623 15.9754 2.85041C16.1512 2.6746 16.25 2.43614 16.25 2.1875C16.25 1.93886 16.1512 1.7004 15.9754 1.52459C15.7996 1.34877 15.5611 1.25 15.3125 1.25H3.75C3.08696 1.25 2.45107 1.51339 1.98223 1.98223C1.51339 2.45107 1.25 3.08696 1.25 3.75V16.25C1.25 16.913 1.51339 17.5489 1.98223 18.0178C2.45107 18.4866 3.08696 18.75 3.75 18.75H16.25C16.913 18.75 17.5489 18.4866 18.0178 18.0178C18.4866 17.5489 18.75 16.913 18.75 16.25V12.1875C18.75 11.9389 18.6512 11.7004 18.4754 11.5246C18.2996 11.3488 18.0611 11.25 17.8125 11.25C17.5639 11.25 17.3254 11.3488 17.1496 11.5246C16.9738 11.7004 16.875 11.9389 16.875 12.1875V16.25C16.875 16.4158 16.8092 16.5747 16.6919 16.6919C16.5747 16.8092 16.4158 16.875 16.25 16.875H3.75ZM19.725 5.85C19.8906 5.67228 19.9808 5.43722 19.9765 5.19435C19.9722 4.95147 19.8738 4.71974 19.702 4.54797C19.5303 4.37621 19.2985 4.27782 19.0557 4.27353C18.8128 4.26925 18.5777 4.3594 18.4 4.525L11.4525 11.4713L9.11125 9.05125C9.02583 8.96199 8.92361 8.8905 8.81047 8.84088C8.69732 8.79126 8.57549 8.7645 8.45197 8.76212C8.32845 8.75975 8.20567 8.78181 8.09071 8.82704C7.97574 8.87227 7.87085 8.93978 7.78206 9.02569C7.69327 9.11159 7.62234 9.2142 7.57334 9.32761C7.52433 9.44103 7.49823 9.563 7.49653 9.68654C7.49483 9.81007 7.51756 9.93272 7.56342 10.0474C7.60928 10.1622 7.67736 10.2667 7.76375 10.355L10.7675 13.46C10.8539 13.5496 10.9573 13.6212 11.0717 13.6704C11.1861 13.7196 11.3091 13.7456 11.4336 13.7467C11.5581 13.7479 11.6816 13.7243 11.7969 13.6772C11.9122 13.6301 12.0169 13.5605 12.105 13.4725L19.725 5.85Z"
            fill="currentColor"
          />
        </svg>
        Done
      </button>
      <button id={classes.active} onClick={() => dispatch(setFilter("active"))}>
        <svg
          width="22"
          height="22"
          viewBox="0 0 22 22"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M2.55212 3.92307C2.07565 3.92307 1.69232 4.29305 1.69232 4.75295V6.41271C1.69232 6.8726 2.07565 7.24259 2.55212 7.24259H4.27173C4.7482 7.24259 5.13153 6.8726 5.13153 6.41271V4.75295C5.13153 4.29305 4.7482 3.92307 4.27173 3.92307H2.55212ZM7.99753 4.47632C7.36343 4.47632 6.85113 4.97079 6.85113 5.58283C6.85113 6.19487 7.36343 6.68934 7.99753 6.68934H18.3151C18.9493 6.68934 19.4616 6.19487 19.4616 5.58283C19.4616 4.97079 18.9493 4.47632 18.3151 4.47632H7.99753ZM7.99753 10.0089C7.36343 10.0089 6.85113 10.5033 6.85113 11.1154C6.85113 11.7274 7.36343 12.2219 7.99753 12.2219H18.3151C18.9493 12.2219 19.4616 11.7274 19.4616 11.1154C19.4616 10.5033 18.9493 10.0089 18.3151 10.0089H7.99753ZM7.99753 15.5414C7.36343 15.5414 6.85113 16.0359 6.85113 16.6479C6.85113 17.26 7.36343 17.7544 7.99753 17.7544H18.3151C18.9493 17.7544 19.4616 17.26 19.4616 16.6479C19.4616 16.0359 18.9493 15.5414 18.3151 15.5414H7.99753ZM1.69232 10.2855V11.9453C1.69232 12.4051 2.07565 12.7751 2.55212 12.7751H4.27173C4.7482 12.7751 5.13153 12.4051 5.13153 11.9453V10.2855C5.13153 9.8256 4.7482 9.45561 4.27173 9.45561H2.55212C2.07565 9.45561 1.69232 9.8256 1.69232 10.2855ZM2.55212 14.9882C2.07565 14.9882 1.69232 15.3581 1.69232 15.818V17.4778C1.69232 17.9377 2.07565 18.3077 2.55212 18.3077H4.27173C4.7482 18.3077 5.13153 17.9377 5.13153 17.4778V15.818C5.13153 15.3581 4.7482 14.9882 4.27173 14.9882H2.55212Z"
            fill="currentColor"
          />
        </svg>
        Unfinished
      </button>
      <DateInput />

      <button
        id={classes.reset}
        className={`${
          filter !== "all" || selectedDate !== null ? classes.visible : ""
        }`}
        onClick={() => {
          dispatch(setFilter("all"));
          dispatch(setSelectedDate(null));
        }}
      >
        <svg
          width="26"
          height="26"
          viewBox="0 0 26 26"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M18.223 7.63723C17.1894 7.63586 16.1741 7.90966 15.2813 8.4305C14.3885 8.95134 13.6504 9.70044 13.1429 10.6009V6.85568H11.5798V13.1081H17.8322V11.545H14.4067C14.7547 10.866 15.2774 10.292 15.921 9.88202C16.5646 9.47209 17.3057 9.24105 18.0682 9.21269C18.8307 9.18432 19.587 9.35965 20.2592 9.72064C20.9315 10.0816 21.4954 10.6152 21.8929 11.2665C22.2904 11.9178 22.5072 12.6632 22.521 13.4261C22.5347 14.1891 22.345 14.9418 21.9712 15.607C21.5974 16.2722 21.0531 16.8258 20.3943 17.2108C19.7355 17.5958 18.986 17.7983 18.223 17.7974H17.8322V19.3605H18.223C19.7776 19.3605 21.2686 18.7429 22.3678 17.6437C23.4671 16.5444 24.0847 15.0535 24.0847 13.4989C24.0847 11.9443 23.4671 10.4533 22.3678 9.35407C21.2686 8.2548 19.7776 7.63723 18.223 7.63723Z"
            fill="currentColor"
          />
          <path
            d="M20.9584 5.2926H3.76427V7.77089L9.5587 13.5653L10.0167 14.0233V20.9236H13.1429V19.3605H14.706V20.9236C14.706 21.3382 14.5413 21.7358 14.2482 22.0289C13.955 22.322 13.5575 22.4867 13.1429 22.4867H10.0167C9.60213 22.4867 9.20455 22.322 8.91141 22.0289C8.61827 21.7358 8.45358 21.3382 8.45358 20.9236V14.6712L2.65916 8.87601C2.366 8.58294 2.20126 8.18542 2.20117 7.77089V5.2926C2.20117 4.87803 2.36586 4.48045 2.65899 4.18731C2.95213 3.89418 3.34971 3.72949 3.76427 3.72949H20.9584V5.2926Z"
            fill="currentColor"
          />
        </svg>
      </button>
    </div>
  );
}
